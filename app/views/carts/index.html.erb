<div class="row">

	<div class="col-xs-10" style="margin-left: 60px;">
		<h4>ショッピングカート</h4>
	</div>
	<div class="col-xs-2" style="margin-right: 60px;">
		<%= link_to 'カートを空にする', carts_members_path, method: :delete, class: "btn-sm btn-danger" %>
	</div>
</div>
<div class="row">
	<div class="col-xs-10 col-xs-offset-1">
		<table class="table table-bordered">
			<thead class="t-color">
				<tr>
					<th>商品名</th>
					<th>単価(税込)</th>
					<th>数量</th>
					<th>小計</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
			<% @sum = 0 %>
				<% @cart_items.each do |cart_item| %>
					<tr>
					　　 <td><%= attachment_image_tag cart_item.item, :image, :fill, 80, 80, format: 'jpeg', fallback: "no_image.jpg" %>
						<%= cart_item.item.name %></td>
						<td><%= (cart_item.item.tax_excluded_price * 1.1 ).round(0).to_s(:delimited) %></td>
						<td>
																	<!-- #{cart_item.id}はもともとある変数の引用 -->
							<%= form_for(cart_item, url: "/members/carts/#{cart_item.id}") do |f| %>
									<%= f.text_field :count %>
									<%= f.submit '変更', class: "btn btn-primary" %>
								<% end %>
						</td>
						<td>
							<%= ((cart_item.item.tax_excluded_price * 1.1).round(0) * (cart_item.count)).to_s(:delimited) %>円
						</td>
							<% @sum += ((cart_item.item.tax_excluded_price * 1.1).round(0) * (cart_item.count)) %>
						<td>
							<%= link_to '削除する', "/members/carts/#{cart_item.id}", method: :delete, class: "btn-sm btn-danger" %>
						</td>
					</tr>
				<% end %>
			</tbody>
		</table>
	</div>
</div>
<div class="row">
	<div class="col-md-3 col-md-offset-8">
		<!--  offse-にて９分割分頭に余白をつけています。 -->
		<table class="table table-bordered">
		<tr>
			<th>合計金額</th>
			<td><%= @sum.to_s(:delimited) %>円</td>
		</tr>
		</table>
	</div>
</div>
<%= link_to '買い物を続ける', items_path, class: "btn btn-primary" %>
<div class="row">
	<div class="actions col-md-4 col-md-offset-4" style="margin-left: 400px; margin-top: 20px; margin-bottom: 20px;">
		<%= link_to '情報入力に進む', new_order_path, class: "btn btn-success" %>
	</div>
</div>
